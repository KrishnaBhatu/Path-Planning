<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info.cleaned - app/map.cpp</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">app</a> - map.cpp<span style="font-size: 80%;"> (source / <a href="map.cpp.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info.cleaned</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">197</td>
            <td class="headerCovTableEntry">197</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2018-10-16 17:46:52</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">25</td>
            <td class="headerCovTableEntry">25</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /**</a>
<span class="lineNum">       2 </span>            :  *  @copyright (c) 2018 Krishna Bhatu, Siddhesh Rane
<span class="lineNum">       3 </span>            :  *  @file    map.cpp
<span class="lineNum">       4 </span>            :  *  @author  Krishna Bhatu, Siddhesh Rane
<span class="lineNum">       5 </span>            :  *
<span class="lineNum">       6 </span>            :  *  @brief class for map of an image;
<span class="lineNum">       7 </span>            :  *
<span class="lineNum">       8 </span>            :  *  @section DESCRIPTION
<span class="lineNum">       9 </span>            :  *
<span class="lineNum">      10 </span>            :  *  This source file implements a Map class.
<span class="lineNum">      11 </span>            :  *  The class contains methods to get and set
<span class="lineNum">      12 </span>            :  *  size of a map.
<span class="lineNum">      13 </span>            :  *
<span class="lineNum">      14 </span>            :  */
<a name="15"><span class="lineNum">      15 </span>            : #include &quot;../include/map.h&quot;</a>
<span class="lineNum">      16 </span>            : ///! Default Constructor
<span class="lineNum">      17 </span><span class="lineCov">          2 : Map::Map() {</span>
<span class="lineNum">      18 </span><span class="lineCov">          2 :   sizeX = 0;</span>
<span class="lineNum">      19 </span><span class="lineCov">          2 :   sizeY = 0;</span>
<span class="lineNum">      20 </span><span class="lineCov">          2 :   robotX = 0;</span>
<span class="lineNum">      21 </span><span class="lineCov">          2 :   robotY = 0;</span>
<span class="lineNum">      22 </span><span class="lineCov">          2 :   goalX = 480;</span>
<span class="lineNum">      23 </span><span class="lineCov">          2 :   goalY = 480;</span>
<a name="24"><span class="lineNum">      24 </span><span class="lineCov">          2 : }</span></a>
<span class="lineNum">      25 </span>            : ///! Constructor with initial values
<span class="lineNum">      26 </span><span class="lineCov">          8 : Map::Map(const int&amp; x, const int&amp; y, const cv::Mat &amp;imageMap) {</span>
<span class="lineNum">      27 </span><span class="lineCov">          8 :   sizeX = x;</span>
<span class="lineNum">      28 </span><span class="lineCov">          8 :   sizeY = y;</span>
<span class="lineNum">      29 </span><span class="lineCov">          8 :   image = imageMap;</span>
<span class="lineNum">      30 </span><span class="lineCov">          8 :   robotX = 0;</span>
<span class="lineNum">      31 </span><span class="lineCov">          8 :   robotY = 0;</span>
<span class="lineNum">      32 </span><span class="lineCov">          8 :   goalX = 480;</span>
<span class="lineNum">      33 </span><span class="lineCov">          8 :   goalY = 480;</span>
<a name="34"><span class="lineNum">      34 </span><span class="lineCov">          8 : }</span></a>
<span class="lineNum">      35 </span>            : ///! Default Destructor
<span class="lineNum">      36 </span><span class="lineCov">         10 : Map::~Map() {</span>
<a name="37"><span class="lineNum">      37 </span><span class="lineCov">         10 : }</span></a>
<span class="lineNum">      38 </span>            : ///! Get map width in pixels
<span class="lineNum">      39 </span><span class="lineCov">          2 : int Map::getSizeX() {</span>
<span class="lineNum">      40 </span><span class="lineCov">          2 :   return sizeX;</span>
<a name="41"><span class="lineNum">      41 </span>            : }</a>
<span class="lineNum">      42 </span>            : ///! Set map width
<span class="lineNum">      43 </span><span class="lineCov">          1 : void Map::setSizeX(const int&amp; x) {</span>
<span class="lineNum">      44 </span><span class="lineCov">          1 :   sizeX = x;</span>
<a name="45"><span class="lineNum">      45 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">      46 </span>            : ///! Get map height in pixels
<span class="lineNum">      47 </span><span class="lineCov">          2 : int Map::getSizeY() {</span>
<span class="lineNum">      48 </span><span class="lineCov">          2 :   return sizeY;</span>
<a name="49"><span class="lineNum">      49 </span>            : }</a>
<span class="lineNum">      50 </span>            : ///! Set map height
<span class="lineNum">      51 </span><span class="lineCov">          1 : void Map::setSizeY(const int&amp; y) {</span>
<span class="lineNum">      52 </span><span class="lineCov">          1 :   sizeY = y;</span>
<a name="53"><span class="lineNum">      53 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">      54 </span>            : ///! Get robot x coordinate
<span class="lineNum">      55 </span><span class="lineCov">          1 : int Map::getRobotX() {</span>
<span class="lineNum">      56 </span><span class="lineCov">          1 :   return robotX;</span>
<a name="57"><span class="lineNum">      57 </span>            : }</a>
<span class="lineNum">      58 </span>            : ///! Set robot x coordinate
<span class="lineNum">      59 </span><span class="lineCov">          3 : void Map::setRobotX(const int&amp; x) {</span>
<span class="lineNum">      60 </span><span class="lineCov">          3 :   robotX = x;</span>
<a name="61"><span class="lineNum">      61 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">      62 </span>            : ///! Get robot y coordinate
<span class="lineNum">      63 </span><span class="lineCov">          1 : int Map::getRobotY() {</span>
<span class="lineNum">      64 </span><span class="lineCov">          1 :   return robotY;</span>
<a name="65"><span class="lineNum">      65 </span>            : }</a>
<span class="lineNum">      66 </span>            : ///! Set robot y coordinate
<span class="lineNum">      67 </span><span class="lineCov">          3 : void Map::setRobotY(const int&amp; y) {</span>
<span class="lineNum">      68 </span><span class="lineCov">          3 :   robotY = y;</span>
<a name="69"><span class="lineNum">      69 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">      70 </span>            : ///! Get goal x coordinate
<span class="lineNum">      71 </span><span class="lineCov">          1 : int Map::getGoalX() {</span>
<span class="lineNum">      72 </span><span class="lineCov">          1 :   return goalX;</span>
<a name="73"><span class="lineNum">      73 </span>            : }</a>
<span class="lineNum">      74 </span>            : ///! Set goal x coordinate
<span class="lineNum">      75 </span><span class="lineCov">          3 : void Map::setGoalX(const int&amp; x) {</span>
<span class="lineNum">      76 </span><span class="lineCov">          3 :   goalX = x;</span>
<a name="77"><span class="lineNum">      77 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">      78 </span>            : ///! Get goal y coordinate
<span class="lineNum">      79 </span><span class="lineCov">          1 : int Map::getGoalY() {</span>
<span class="lineNum">      80 </span><span class="lineCov">          1 :   return goalY;</span>
<a name="81"><span class="lineNum">      81 </span>            : }</a>
<span class="lineNum">      82 </span>            : ///! Set goal y coordinate
<span class="lineNum">      83 </span><span class="lineCov">          3 : void Map::setGoalY(const int&amp; y) {</span>
<span class="lineNum">      84 </span><span class="lineCov">          3 :   goalY = y;</span>
<a name="85"><span class="lineNum">      85 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">      86 </span>            : ///! Read image and store obstacle coordinates
<span class="lineNum">      87 </span><span class="lineCov">          3 : void Map::readObstaclePixels() {</span>
<span class="lineNum">      88 </span><span class="lineCov">          6 :   cv::Mat greyImage, threshImage, dilatedImage, kernel, sub;</span>
<span class="lineNum">      89 </span><span class="lineCov">          3 :   cv::cvtColor(image, greyImage, CV_BGR2GRAY);</span>
<span class="lineNum">      90 </span><span class="lineCov">          3 :   cv::threshold(greyImage, threshImage, 127, 255, CV_THRESH_BINARY);</span>
<span class="lineNum">      91 </span><span class="lineCov">          3 :   kernel = cv::Mat::ones(10, 10, CV_32F);</span>
<span class="lineNum">      92 </span><span class="lineCov">          3 :   cv::erode(threshImage, dilatedImage, kernel);</span>
<span class="lineNum">      93 </span><span class="lineCov">          3 :   int i = 0, j = 0;</span>
<span class="lineNum">      94 </span><span class="lineCov">          3 :   cv::MatIterator_&lt;uchar&gt; it, end;</span>
<span class="lineNum">      95 </span><span class="lineCov">     750003 :   for (it = dilatedImage.begin&lt;uchar&gt;(), end = dilatedImage.end&lt;uchar&gt;();</span>
<span class="lineNum">      96 </span>            :       it != end; it++) {
<span class="lineNum">      97 </span><span class="lineCov">     750000 :     if (i == dilatedImage.cols) {</span>
<span class="lineNum">      98 </span><span class="lineCov">       1497 :       j++;</span>
<span class="lineNum">      99 </span><span class="lineCov">       1497 :       i = 0;</span>
<span class="lineNum">     100 </span>            :     }
<span class="lineNum">     101 </span><span class="lineCov">     750000 :     if (*it == static_cast&lt;uchar&gt;(0)) {</span>
<span class="lineNum">     102 </span><span class="lineCov">     173163 :       obstaclesCoordinates.emplace_back(cv::Point_&lt;int&gt;(i, j));</span>
<span class="lineNum">     103 </span>            :     }
<span class="lineNum">     104 </span><span class="lineCov">     750000 :     i++;</span>
<span class="lineNum">     105 </span>            :   }
<a name="106"><span class="lineNum">     106 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     107 </span>            : ///! Ask user for coordinates of robot and goal location
<span class="lineNum">     108 </span><span class="lineCov">          2 : bool Map::validateCoordinatesOfEndNode(const int&amp; x, const int&amp; y) {</span>
<span class="lineNum">     109 </span><span class="lineCov">          2 :   bool isValidInput = nodeCheck(x, y);</span>
<span class="lineNum">     110 </span><span class="lineCov">          2 :   if (x &gt; 499 || y &gt; 499 || x &lt; 0 || y &lt; 0) {</span>
<span class="lineNum">     111 </span><span class="lineCov">          1 :     isValidInput = false;</span>
<span class="lineNum">     112 </span>            :   }
<span class="lineNum">     113 </span><span class="lineCov">          2 :   return isValidInput;</span>
<a name="114"><span class="lineNum">     114 </span>            : }</a>
<span class="lineNum">     115 </span>            : ///! Check if robot or goal coordinates lie on obstacle
<span class="lineNum">     116 </span><span class="lineCov">        979 : bool Map::nodeCheck(int x, int y) {</span>
<span class="lineNum">     117 </span><span class="lineCov">        979 :   bool notOnObstacle = true;</span>
<span class="lineNum">     118 </span><span class="lineCov">       3896 :   for (int i = x; i &lt; (x + 10); i++) {</span>
<span class="lineNum">     119 </span><span class="lineCov">      32860 :     for (int j = y; j &lt; (y + 10); j++) {</span>
<span class="lineNum">     120 </span><span class="lineCov"> 1114035647 :       for (auto pnt : obstaclesCoordinates) {</span>
<span class="lineNum">     121 </span><span class="lineCov"> 1114006404 :         if (i == pnt.x &amp;&amp; j == pnt.y) {</span>
<span class="lineNum">     122 </span><span class="lineCov">        700 :           notOnObstacle = false;</span>
<span class="lineNum">     123 </span><span class="lineCov">        700 :           return notOnObstacle;</span>
<span class="lineNum">     124 </span>            :         }
<span class="lineNum">     125 </span>            :       }
<span class="lineNum">     126 </span>            :     }
<span class="lineNum">     127 </span>            :   }
<span class="lineNum">     128 </span><span class="lineCov">        279 :   return notOnObstacle;</span>
<a name="129"><span class="lineNum">     129 </span>            : }</a>
<span class="lineNum">     130 </span>            : ///! Generate radom nodes in free space
<span class="lineNum">     131 </span><span class="lineCov">          3 : void Map::generateRandomNodes() {</span>
<span class="lineNum">     132 </span>            :   ///! create robot node
<span class="lineNum">     133 </span><span class="lineCov">          3 :   randomNodes.emplace_back(Node(robotX, robotY, true, false));</span>
<span class="lineNum">     134 </span>            :   ///! code for generating random nodes
<span class="lineNum">     135 </span><span class="lineCov">          3 :   int noOfPossibleNodesi = sizeY / 10;</span>
<span class="lineNum">     136 </span><span class="lineCov">          3 :   int noOfPossibleNodesj = sizeX / 10;</span>
<span class="lineNum">     137 </span>            : 
<span class="lineNum">     138 </span><span class="lineCov">         33 :   for (int i = 0; i &lt;= (sizeY - noOfPossibleNodesi); i += noOfPossibleNodesi) {</span>
<span class="lineNum">     139 </span><span class="lineCov">        330 :     for (int j = 0; j &lt;= (sizeX - noOfPossibleNodesj); j +=</span>
<span class="lineNum">     140 </span>            :         noOfPossibleNodesj) {
<span class="lineNum">     141 </span><span class="lineCov">        300 :       int attemptNodeMaking = 0;</span>
<span class="lineNum">     142 </span><span class="lineCov">       1700 :       while (attemptNodeMaking &lt; 25) {</span>
<span class="lineNum">     143 </span><span class="lineCov">        976 :         cv::Point_&lt;int&gt; node = getNode(i, j);</span>
<span class="lineNum">     144 </span><span class="lineCov">        976 :         bool NodeValid = nodeCheck(node.x, node.y);</span>
<span class="lineNum">     145 </span><span class="lineCov">        976 :         if (NodeValid) {</span>
<span class="lineNum">     146 </span><span class="lineCov">        276 :           randomNodes.emplace_back(Node(node.x, node.y, false, false));</span>
<span class="lineNum">     147 </span><span class="lineCov">        276 :           break;</span>
<span class="lineNum">     148 </span>            :         } else {
<span class="lineNum">     149 </span><span class="lineCov">        700 :           attemptNodeMaking++;</span>
<span class="lineNum">     150 </span>            :         }
<span class="lineNum">     151 </span>            :       }
<span class="lineNum">     152 </span>            :     }
<span class="lineNum">     153 </span>            :   }
<span class="lineNum">     154 </span>            :   ///! create goal node
<span class="lineNum">     155 </span><span class="lineCov">          3 :   randomNodes.emplace_back(Node(goalX, goalY, false, true));</span>
<span class="lineNum">     156 </span>            :   ///! draw nodes on image
<span class="lineNum">     157 </span><span class="lineCov">        285 :   for (auto node : randomNodes) {</span>
<span class="lineNum">     158 </span><span class="lineCov">        282 :     int px1 = node.getX();</span>
<span class="lineNum">     159 </span><span class="lineCov">        282 :     int py1 = node.getY();</span>
<span class="lineNum">     160 </span><span class="lineCov">        282 :     int px2 = node.getX() + 10;</span>
<span class="lineNum">     161 </span><span class="lineCov">        282 :     int py2 = node.getY() + 10;</span>
<span class="lineNum">     162 </span><span class="lineCov">        282 :     if (node.isRobotBool()) {</span>
<span class="lineNum">     163 </span><span class="lineCov">          6 :       cv::rectangle(image, cv::Point_&lt;int&gt;(px1, py1), cv::Point_&lt;int&gt;(px2, py2),</span>
<span class="lineNum">     164 </span><span class="lineCov">          3 :                     cv::Scalar_&lt;double&gt;(255, 0, 0), -1);</span>
<span class="lineNum">     165 </span><span class="lineCov">        279 :     } else if (node.isGoalBool()) {</span>
<span class="lineNum">     166 </span><span class="lineCov">          6 :       cv::rectangle(image, cv::Point_&lt;int&gt;(px1, py1), cv::Point_&lt;int&gt;(px2, py2),</span>
<span class="lineNum">     167 </span><span class="lineCov">          3 :                     cv::Scalar_&lt;double&gt;(0, 255, 0), -1);</span>
<span class="lineNum">     168 </span>            :     } else {
<span class="lineNum">     169 </span><span class="lineCov">        552 :       cv::rectangle(image, cv::Point_&lt;int&gt;(px1, py1), cv::Point_&lt;int&gt;(px2, py2),</span>
<span class="lineNum">     170 </span><span class="lineCov">        276 :                     cv::Scalar_&lt;double&gt;(0, 0, 255), -1);</span>
<span class="lineNum">     171 </span>            :     }
<span class="lineNum">     172 </span>            :   }
<a name="173"><span class="lineNum">     173 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     174 </span>            : ///! Get random node in current area of image
<span class="lineNum">     175 </span><span class="lineCov">        977 : cv::Point_&lt;int&gt; Map::getNode(int i, int j) {</span>
<span class="lineNum">     176 </span><span class="lineCov">        977 :   cv::Point_&lt;int&gt; node;</span>
<span class="lineNum">     177 </span><span class="lineCov">        977 :   int randx = rand() % 4;</span>
<span class="lineNum">     178 </span><span class="lineCov">        977 :   int randy = rand() % 4;</span>
<span class="lineNum">     179 </span><span class="lineCov">        977 :   int nx = randx * 10 + i;</span>
<span class="lineNum">     180 </span><span class="lineCov">        977 :   int ny = randy * 10 + j;</span>
<span class="lineNum">     181 </span><span class="lineCov">        977 :   node.x = nx;</span>
<span class="lineNum">     182 </span><span class="lineCov">        977 :   node.y = ny;</span>
<span class="lineNum">     183 </span><span class="lineCov">        977 :   return node;</span>
<a name="184"><span class="lineNum">     184 </span>            : }</a>
<span class="lineNum">     185 </span>            : ///! Generate neighbours for every node
<span class="lineNum">     186 </span><span class="lineCov">          2 : void Map::generateNeighbours() {</span>
<span class="lineNum">     187 </span><span class="lineCov">          2 : std::cout &lt;&lt; &quot;Generating neighbours. Please wait.&quot; &lt;&lt; std::endl;</span>
<span class="lineNum">     188 </span>            :   int dist;
<span class="lineNum">     189 </span>            :   double line;
<span class="lineNum">     190 </span><span class="lineCov">          4 :   std::vector&lt;std::vector&lt;Node&gt;&gt; neighbourVec;</span>
<span class="lineNum">     191 </span><span class="lineCov">          4 :   std::vector&lt;std::vector&lt;int&gt;&gt; pathCostsTemp;</span>
<span class="lineNum">     192 </span><span class="lineCov">        182 :   for (auto ncheck : randomNodes) {</span>
<span class="lineNum">     193 </span><span class="lineCov">        360 :     std::vector&lt;Node&gt; tempN;</span>
<span class="lineNum">     194 </span><span class="lineCov">        360 :     std::vector&lt;int&gt; tempP;</span>
<span class="lineNum">     195 </span><span class="lineCov">      16380 :     for (auto nAll : randomNodes) {</span>
<span class="lineNum">     196 </span><span class="lineCov">      16200 :       dist = sqrt(</span>
<span class="lineNum">     197 </span><span class="lineCov">      16200 :           pow((ncheck.getX() - nAll.getX()), 2)</span>
<span class="lineNum">     198 </span><span class="lineCov">      32400 :               + pow((ncheck.getY() - nAll.getY()), 2));</span>
<span class="lineNum">     199 </span><span class="lineCov">      16200 :       if (dist &lt; 150) {</span>
<span class="lineNum">     200 </span><span class="lineCov">       3398 :         if (dist != 0) {</span>
<span class="lineNum">     201 </span><span class="lineCov">       3218 :           bool test = true;</span>
<span class="lineNum">     202 </span><span class="lineCov">  153842614 :           for (auto obs : obstaclesCoordinates) {</span>
<span class="lineNum">     203 </span><span class="lineCov">  153840354 :             line = ((obs.y - nAll.getY()) * (nAll.getX() - ncheck.getX()))</span>
<span class="lineNum">     204 </span><span class="lineCov">  153840354 :                 - ((obs.x - nAll.getX()) * (nAll.getY() - ncheck.getY()));</span>
<span class="lineNum">     205 </span><span class="lineCov">  153840354 :             if (line == 0) {</span>
<span class="lineNum">     206 </span><span class="lineCov">     184054 :               if (((nAll.getX() - obs.x) &lt;= 0 &amp;&amp; (ncheck.getX() - obs.x) &gt;= 0)</span>
<span class="lineNum">     207 </span><span class="lineCov">     151682 : || ((nAll.getX() - obs.x) &gt;= 0 &amp;&amp;</span>
<span class="lineNum">     208 </span><span class="lineCov">      25772 : (ncheck.getX() - obs.x) &lt;= 0)) {</span>
<span class="lineNum">     209 </span><span class="lineCov">      36139 :                 if (((nAll.getY() - obs.y) &lt;= 0 &amp;&amp; (ncheck.getY() - obs.y) &gt;= 0)</span>
<span class="lineNum">     210 </span><span class="lineCov">      29355 :                     || ((nAll.getY() - obs.y) &gt;= 0</span>
<span class="lineNum">     211 </span><span class="lineCov">       7193 :                         &amp;&amp; (ncheck.getY() - obs.y) &lt;= 0)) {</span>
<span class="lineNum">     212 </span><span class="lineCov">        958 :                   test = false;</span>
<span class="lineNum">     213 </span><span class="lineCov">        958 :                   break;</span>
<span class="lineNum">     214 </span>            :                 }
<span class="lineNum">     215 </span>            :                 }
<span class="lineNum">     216 </span>            :               }
<span class="lineNum">     217 </span>            :             }
<span class="lineNum">     218 </span><span class="lineCov">       3218 :           if (test) {</span>
<span class="lineNum">     219 </span><span class="lineCov">       2260 :             tempN.emplace_back(nAll);</span>
<span class="lineNum">     220 </span><span class="lineCov">       2260 :             tempP.emplace_back(dist);</span>
<span class="lineNum">     221 </span>            :           }
<span class="lineNum">     222 </span>            :          }
<span class="lineNum">     223 </span>            :         }
<span class="lineNum">     224 </span>            :       }
<span class="lineNum">     225 </span><span class="lineCov">        180 :     neighbourVec.emplace_back(tempN);</span>
<span class="lineNum">     226 </span><span class="lineCov">        180 :     pathCostsTemp.emplace_back(tempP);</span>
<span class="lineNum">     227 </span>            :     }
<span class="lineNum">     228 </span><span class="lineCov">          2 :   int count = 0;</span>
<span class="lineNum">     229 </span><span class="lineCov">        182 :   for (auto &amp;&amp; n : randomNodes) {</span>
<span class="lineNum">     230 </span><span class="lineCov">        180 :     n.neighbours = neighbourVec[count];</span>
<span class="lineNum">     231 </span><span class="lineCov">        180 :     n.pathCosts = pathCostsTemp[count];</span>
<span class="lineNum">     232 </span><span class="lineCov">        180 :   count++;</span>
<span class="lineNum">     233 </span>            :   }
<a name="234"><span class="lineNum">     234 </span><span class="lineCov">          2 : }</span></a>
<span class="lineNum">     235 </span>            : ///! Draw lines between neighbours
<span class="lineNum">     236 </span><span class="lineCov">          2 : void Map::drawNeighbours() {</span>
<span class="lineNum">     237 </span><span class="lineCov">          2 :   generateNeighbours();</span>
<span class="lineNum">     238 </span><span class="lineCov">        182 : for (Node n : randomNodes) {</span>
<span class="lineNum">     239 </span><span class="lineCov">       2440 :   for (Node nn : n.neighbours) {</span>
<span class="lineNum">     240 </span><span class="lineCov">       4520 :     cv::line(Map::image, cv::Point_&lt;int&gt;(n.getX(), n.getY()),</span>
<span class="lineNum">     241 </span>            :         cv::Point_&lt;int&gt;(nn.getX(), nn.getY()),
<span class="lineNum">     242 </span><span class="lineCov">       2260 :         cv::Scalar_&lt;double&gt;(160, 160, 160));</span>
<span class="lineNum">     243 </span>            :     }
<span class="lineNum">     244 </span>            :   }
<a name="245"><span class="lineNum">     245 </span><span class="lineCov">          2 : }</span></a>
<span class="lineNum">     246 </span>            : ///! Find optimum path for given image and given robot coordinates
<span class="lineNum">     247 </span><span class="lineCov">          1 : void Map::findOptimumPath() {</span>
<span class="lineNum">     248 </span>            : ///! open = vector of visited nodes
<span class="lineNum">     249 </span><span class="lineCov">          1 :   result.emplace_back(std::make_shared &lt; Node &gt; (randomNodes[0]));</span>
<span class="lineNum">     250 </span><span class="lineCov">          1 : int currNode = 0;</span>
<span class="lineNum">     251 </span><span class="lineCov">         11 :   while (!result.empty()) {</span>
<span class="lineNum">     252 </span><span class="lineCov">          6 :   int n_count = 0;</span>
<span class="lineNum">     253 </span><span class="lineCov">          6 :   int smallest = 800;</span>
<span class="lineNum">     254 </span><span class="lineCov">          6 :   int index = 0;</span>
<span class="lineNum">     255 </span><span class="lineCov">         84 :     for (auto &amp;&amp; n : result[currNode]-&gt;neighbours) {</span>
<span class="lineNum">     256 </span><span class="lineCov">        156 :     double hn = sqrt(pow((n.getX() - randomNodes[randomNodes.size()-1].getX()),</span>
<span class="lineNum">     257 </span><span class="lineCov">        156 : 2)+ pow((n.getY() - randomNodes[randomNodes.size()-1].getY()), 2));</span>
<span class="lineNum">     258 </span><span class="lineCov">         78 :   n.setHN(hn);</span>
<span class="lineNum">     259 </span><span class="lineCov">         78 :     if (n.getHN() &lt; smallest) {</span>
<span class="lineNum">     260 </span><span class="lineCov">         53 :       smallest = n.getHN();</span>
<span class="lineNum">     261 </span><span class="lineCov">         53 :         index = n_count;</span>
<span class="lineNum">     262 </span>            :       }
<span class="lineNum">     263 </span><span class="lineCov">         78 :     n_count++;</span>
<span class="lineNum">     264 </span>            :   }
<span class="lineNum">     265 </span><span class="lineCov">          6 :     unsigned int rNodeIndex = 0;</span>
<span class="lineNum">     266 </span><span class="lineCov">          6 :   int rCount = 0;</span>
<span class="lineNum">     267 </span><span class="lineCov">        319 :   for (Node n : randomNodes) {</span>
<span class="lineNum">     268 </span><span class="lineCov">        638 :       if (n.getX() == result[currNode]-&gt;neighbours[index].getX()</span>
<span class="lineNum">     269 </span><span class="lineCov">        319 :           &amp;&amp; n.getY() == result[currNode]-&gt;neighbours[index].getY()) {</span>
<span class="lineNum">     270 </span><span class="lineCov">          6 :       rNodeIndex = rCount;</span>
<span class="lineNum">     271 </span><span class="lineCov">          6 :       break;</span>
<span class="lineNum">     272 </span>            :     }
<span class="lineNum">     273 </span><span class="lineCov">        313 :   rCount++;</span>
<span class="lineNum">     274 </span>            : }
<span class="lineNum">     275 </span><span class="lineCov">          6 :   currNode++;</span>
<span class="lineNum">     276 </span><span class="lineCov">          6 :     result.emplace_back(std::make_shared &lt; Node &gt; (randomNodes[rNodeIndex]));</span>
<span class="lineNum">     277 </span>            :   ///! if final node is reached then exit.
<span class="lineNum">     278 </span><span class="lineCov">          6 :   if (rNodeIndex == randomNodes.size() - 1) {</span>
<span class="lineNum">     279 </span><span class="lineCov">          1 :     break;</span>
<span class="lineNum">     280 </span>            :   }
<span class="lineNum">     281 </span>            : }
<span class="lineNum">     282 </span>            : ///! Print the path
<span class="lineNum">     283 </span><span class="lineCov">          7 :   for (unsigned int i = 0; i &lt; (result.size() - 1); i++) {</span>
<span class="lineNum">     284 </span><span class="lineCov">         36 :   cv::line(</span>
<span class="lineNum">     285 </span>            :       Map::image,
<span class="lineNum">     286 </span><span class="lineCov">         12 :       cv::Point_&lt;int&gt;(result[i]-&gt;getX(), result[i]-&gt;getY()),</span>
<span class="lineNum">     287 </span><span class="lineCov">         12 :              cv::Point_&lt;int&gt;(result[i + 1]-&gt;getX(), result[i + 1]-&gt;getY()),</span>
<span class="lineNum">     288 </span><span class="lineCov">          6 :       cv::Scalar_&lt;double&gt;(255, 255, 0), 3);</span>
<span class="lineNum">     289 </span>            : }
<span class="lineNum">     290 </span><span class="lineCov">          1 : cv::namedWindow(&quot;Display window&quot;, cv::WINDOW_AUTOSIZE);</span>
<a name="291"><span class="lineNum">     291 </span><span class="lineCov">          1 : cv::imshow(&quot;Display window&quot;, Map::image);</span></a>
<span class="lineNum">     292 </span><span class="lineCov">          1 : cv::waitKey(0);</span>
<span class="lineNum">     293 </span><span class="lineCov">          4 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.12</a></td></tr>
  </table>
  <br>

</body>
</html>
